<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">

    <!-- Gráfico 1 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Notas x DIA x TOPICO</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryQuantitiesChart'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @entry_quantities, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, 
              adapter: 'highcharts', id: 'entryQuantitiesChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryQuantitiesChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

    <!-- Gráfico 2 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Interacciones x DIA x TOPICO</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryInteractionsChart'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @entry_interactions, xtitle: "Fecha", ytitle: "Cant. Interacciones", thousands: ".", curve: false, 
              adapter: 'highcharts', id: 'entryInteractionsChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryInteractionsChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

  </div>
</div>




<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">

    <!-- Gráfico Title 01 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Notas en TITULOS x DIA x TOPICO</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='titleEntryQuantitiesChart'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'
        data-entries-chart-title-value='true'>

        <%= line_chart @title_entry_quantities, xtitle: "Fecha", ytitle: "Cant. Notas en Titulos", thousands: ".", curve: false, 
              adapter: 'highcharts', id: 'titleEntryQuantitiesChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'titleEntryQuantitiesChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

    <!-- Gráfico Title 02 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Interacciones en TITULOS x DIA x TOPICO</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='titleEntryInteractionsChart'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'
        data-entries-chart-title-value='true'></div>

        <%= line_chart @title_entry_interactions, xtitle: "Fecha", ytitle: "Cant. Interacciones en Titulos", thousands: ".", curve: false, 
              adapter: 'highcharts', id: 'titleEntryInteractionsChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'titleEntryInteractionsChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

  </div>
</div>




<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">

    <!-- Gráfico 3 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Notas por Sentimiento Neutral</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryNeutralQuantitiesChart'
        data-entries-chart-polarity-value='0'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @neutral_quantity, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryNeutralQuantitiesChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryNeutralQuantitiesChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

    <!-- Gráfico 4 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Interacciones por Sentimiento Neutral</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryNeutralInteractionsChart'
        data-entries-chart-polarity-value='0'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @neutral_interaction, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryNeutralInteractionsChart', library: {
              plotOptions: {
                series: {
                  dataLabels: {
                    enabled: true
                  }
                }
              } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryNeutralInteractionsChart', controller_name: 'entries-chart' } %>
      </div>
    </div>
  </div>
</div>

<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">
    
    <!-- Gráfico 5 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Notas por Sentimiento Positivo</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryPositiveQuantitiesChart'
        data-entries-chart-polarity-value='1'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>    

        <%= line_chart @positive_quantity, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryPositiveQuantitiesChart', library: {
            plotOptions: {
              series: {
                dataLabels: {
                  enabled: true
                }
              }
            } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryPositiveQuantitiesChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

    <!-- Gráfico 6 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Interacciones por Sentimiento Positivo</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryPositiveInteractionsChart'
        data-entries-chart-polarity-value='1'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @positive_interaction, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryPositiveInteractionsChart', library: {
            plotOptions: {
              series: {
                dataLabels: {
                  enabled: true
                }
              }
            } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryPositiveInteractionsChart', controller_name: 'entries-chart' } %>
      </div>
    </div>
  </div>
</div>

<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">

    <!-- Gráfico 7 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Notas por Sentimiento Negativo</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryNegativeQuantitiesChart'
        data-entries-chart-polarity-value='2'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>          
        
        <%= line_chart @negative_quantity, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryNegativeQuantitiesChart', library: {
            plotOptions: {
              series: {
                dataLabels: {
                  enabled: true
                }
              }
            } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryNegativeQuantitiesChart', controller_name: 'entries-chart' } %>
      </div>
    </div>

    <!-- Gráfico 8 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Interacciones por Sentimiento Negativo</h2>
      <div class='outside'
        data-controller='entries-chart'
        data-entries-chart-id-value='entryNegativeInteractionsChart'
        data-entries-chart-polarity-value='2'
        data-entries-chart-url-value='<%= entries_data_topics_path %>'>

        <%= line_chart @negative_interaction, xtitle: "Fecha", ytitle: "Cant. Notas", thousands: ".", curve: false, id: 'entryNegativeInteractionsChart', library: {
            plotOptions: {
              series: {
                dataLabels: {
                  enabled: true
                }
              }
            } } %>
        <%= render partial: 'modal', locals: { graph_id: 'entryNegativeInteractionsChart', controller_name: 'entries-chart' } %>
      </div>
    </div>
  </div>
</div>

<div class="mx-auto px-4 py-8 sm:px-6 sm:py-8 lg:px-8">
  <div class="chart-container">
    <!-- Gráfico 9 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Notas en las últimas 24 horas</h2>
      <%= bar_chart @notas_ultimo_dia_topico, xtitle: "TOPICO", ytitle: "Cant. Notas", thousands: ".", library: {
          plotOptions: {
            series: {
              dataLabels: {
                enabled: true
              }
            }
          } } %>
    </div>
    <!-- Gráfico 10 -->
    <div class="w-full sm:w-1/2 overflow-hidden bg-white shadow sm:rounded-lg mb-4 sm:mb-0">
      <h2 class="text-xl mx-5 my-5 font-bold tracking-tight text-gray-900">Cantidad de Interacciones en las últimas 24 horas</h2>
      <%= bar_chart @interacciones_ultimo_dia_topico, xtitle: "TOPICO", ytitle: "Cant. Interacciones", thousands: ".", library: {
        plotOptions: {
            series: {
              dataLabels: {
                enabled: true
              }
            }
          } } %>
    </div> 
  </div>
</div>

<div class="overflow-hidden bg-white shadow sm:rounded-lg">
  <h2 class="text-2xl mx-5 my-5 font-bold tracking-tight text-gray-900">Nube de palabras de notas</h2>
  <div class="mt-20 mb-20 px-30 py-10 sm:p-6">
    <%min_max = find_max_and_min_occurrences(@word_occurrences)%>
    <ul class="cloud">
      <%@word_occurrences.shuffle { |a, b| a[1] <=> b[1] }.each do |word, value|%>
        <li style='color: <%=word_color(@positive_words, @negative_words, word)%>' data-weight="<%=normalize_to_scale(value, min_max[:max], min_max[:min])%>"><%=word%></li>
      <%end%>
    </ul>
  </div>
</div>

<div class="mx-auto py-6 sm:px-6 lg:px-8">
  <h2 class="text-2xl mx-5 my-1 font-bold tracking-tight text-gray-900">Portada y Contra Tapa de Periódicos del día de hoy</h2>
  <div class="bg-white">
    <div class="mx-auto px-4 py-2 sm:px-6 sm:py-2 lg:px-8">
      <div class="mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
        <% @newspapers.each do |newspaper| %>
          <%= render partial: 'home/newspaper', locals: { newspaper: newspaper } %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<header class="bg-white shadow-sm">
  <div class="mx-auto px-4 py-4 sm:px-6 lg:px-8">
    <h1 class="text-2xl font-bold leading-6 text-gray-900">Últimas Noticias</h1>
  </div>
</header>
<main>
  <div class="mx-auto py-6 sm:px-6 lg:px-8">
    <% @topicos.each do |topic| %>
      <% next if topic.list_entries.empty?%>
      <%= render partial: 'entry/entries', locals: { last_entries: topic.list_entries.limit(12), title: topic.name } %>
    <% end %>
  </div>
</main>